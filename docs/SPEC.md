# 仕様（MVP）

## 画面
- フルスクリーン地図 + 右サイドパネル（折りたたみ可）
- パネルは以下のセクションで構成
  - 場所: 検索/地図移動のガイド
  - 建物: 回転矩形描画/選択/削除、高さ/階数
  - 日時: 日付/時刻/スライダー、タイムゾーン
  - 表示: 視点プリセット、pitch/bearingスライダー
  - 結果: 太陽高度/方位、影長など

## 建物
- フットプリント: 回転可能な矩形（GeoJSON Polygon）
- 高さ:
  - `height (m)` 入力/スライダー（1〜500m）
  - `floors` 入力/スライダー（1〜100階）
  - `floorHeight`（1階あたりm、2.5〜5.0m、デフォルト3.1m）
  - 高さ⇄階数は双方向に同期

## 日時とタイムゾーン
- `date` と `time` をパネルで指定
- タイムゾーンは IANA 文字列で選択（初期値 Asia/Tokyo）
- Luxonでローカル日時→UTCへ変換し太陽計算へ入力
- DSTは選択タイムゾーンに従い自動反映

## 影の計算（平坦地モデル）
1. SunCalcで `azimuth`（方位）と `altitude`（高度）を取得
2. `altitude <= 0` の場合は影なし表示
3. `L = H / tan(altitude)`
4. フットプリント頂点を Web Mercator メートルへ投影
5. 影方向（太陽方位の反対向き）へ `L` 平行移動した頂点群を作成
6. 元矩形＋移動矩形から影ポリゴンを生成
7. 地図上に半透明（黒/濃淡）で表示

## 視点操作
- MapLibre標準のズーム/回転/傾き
- プリセット:
  - 真上（pitch=0）
  - 斜め（pitch=30）
  - 地表寄り（pitch=55）
  - 北向きリセット（bearing=0）
  - 周回（建物中心のオービット）
